angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition",function(e,n,t){function r(){i();var t=+e.interval;!isNaN(t)&&t>=0&&(c=n(l,t))}function i(){c&&(n.cancel(c),c=null)}function l(){o?(e.next(),r()):e.pause()}var c,o,a=this,u=a.slides=[],s=-1;a.currentSlide=null;var d=!1;a.select=function(i,l){function c(){if(!d){if(a.currentSlide&&angular.isString(l)&&!e.noTransition&&i.$element){i.$element.addClass(l);{i.$element[0].offsetWidth}angular.forEach(u,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(i,{direction:l,active:!0,entering:!0}),angular.extend(a.currentSlide||{},{direction:l,leaving:!0}),e.$currentTransition=t(i.$element,{}),function(n,t){e.$currentTransition.then(function(){o(n,t)},function(){o(n,t)})}(i,a.currentSlide)}else o(i,a.currentSlide);a.currentSlide=i,s=f,r()}}function o(n,t){angular.extend(n,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(t||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var f=u.indexOf(i);void 0===l&&(l=f>s?"next":"prev"),i&&i!==a.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),n(c)):c())},e.$on("$destroy",function(){d=!0}),a.indexOfSlide=function(e){return u.indexOf(e)},e.next=function(){var n=(s+1)%u.length;return e.$currentTransition?void 0:a.select(u[n],"next")},e.prev=function(){var n=0>s-1?u.length-1:s-1;return e.$currentTransition?void 0:a.select(u[n],"prev")},e.select=function(e){a.select(e)},e.isActive=function(e){return a.currentSlide===e},e.slides=function(){return u},e.$watch("interval",r),e.$on("$destroy",i),e.play=function(){o||(o=!0,r())},e.pause=function(){e.noPause||(o=!1,i())},a.addSlide=function(n,t){n.$element=t,u.push(n),1===u.length||n.active?(a.select(u[u.length-1]),1==u.length&&e.play()):n.active=!1},a.removeSlide=function(e){var n=u.indexOf(e);u.splice(n,1),u.length>0&&e.active?a.select(n>=u.length?u[n-1]:u[n]):s>n&&s--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,n,t,r){r.addSlide(e,n),e.$on("$destroy",function(){r.removeSlide(e)}),e.$watch("active",function(n){n&&r.select(e)})}}});